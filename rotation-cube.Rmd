---
title: "Cube-rotation"
author: "Manu"
date: "17 February 2017"
output: 
  html_document:
    toc: true
---

```{r setup, include=FALSE}
library(magrittr)
library(igraph)
source('test.R')
knitr::opts_chunk$set(echo = TRUE)
```

## Rotation on a cube

In this article we consider a cube and the discrete rotation we can perform on it.

A cube has 6 faces and 8 vertices.

Here we try to formalize this property by introducing 3 transformations: move up, move right and rotate clockwise. Which transform the whole cube by rotating up, right and clockwise.

```{r rotations, echo = FALSE}
rot_up <- cyc(c(1, 5, 7, 3), c(2, 6, 8, 4)) %>% as.cycle
rot_right <- cyc(c(1, 2, 6, 5), c(3, 4, 8, 7)) %>% as.cycle
rot_cck <- cyc(c(1, 2, 4, 3), c(5, 6, 8, 7)) %>% as.cycle
u <- rot_up
r <- rot_right
c <- rot_cck
cat(' Rotate up', as.character(rot_up), '\r\n',
    'Rotate right', as.character(rot_right), '\r\n',
    'Rotate clockwise', as.character(rot_cck))
```

We are interested in the group R generated by these 3 global rotations. 
More elements from R the rotation group:

```{r rotation-products}
c(
  rot_right * rot_right, # order 4
  rot_right * rot_up,# p1
  rot_right * rot_cck,
  
  rot_up * rot_right,
  rot_up * rot_up, # order 4
  rot_up * rot_cck, # == p1
  
  rot_cck * rot_right, # == p1
  rot_cck * rot_up,
  rot_cck * rot_cck) # order 4

```

## Subgroup generated by the squares: SQ2

Let's analyze the products. First we will analyze the squares.

```{r prod-squares, echo = FALSE}
# elements
rr <- rot_right * rot_right
uu <- rot_up * rot_up
cc <- rot_cck * rot_cck
# all the group elements
SQ2 <- c(as.word(rr/rr), rr, uu, cc)

cat('rr: ', as.character(rr %>% as.cycle), '\r\n',
    'uu: ', as.character(uu %>% as.cycle), '\r\n',
    'cc: ', as.character(cc %>% as.cycle), '\r\n', sep = '')
```

**definition** These 3 elements + identity form a group of order 4 that we note SQ2.

### Structure of SQ2

They form a group of order 4 generated by rr and uu and ~ (Z/2Z)^2. 

```{r prod-squares-structure}
# isomorphic to Z/2Z^2
all(
  rr*uu == cc, # rr and uu generate the whole group
  rr*uu == uu*rr, # they commute
  rr^2 == as.cycle(), # they are order 2
  uu^2 == as.cycle())
```

Also it is a *normal subgroup* of R.

```{r square-normal}
# normal subgroup
all(
  rr^u == cc,
  rr^r == rr,
  rr^c == uu,
  
  uu^u == uu,
  uu^r == cc,
  uu^c == rr
)
```

### Structure of R/SQ2

The classes of R/\<uu, rr\> include:

* \<uu, rr\>
```{r, echo = FALSE}
SQ2
```

* r\*\<uu, rr\>
```{r, echo = FALSE}
r*SQ2
```

* u\*\<uu, rr\>
```{r, echo = FALSE}
u*SQ2
```

* c\*\<uu, rr\>
```{r, echo = FALSE}
c*SQ2
```

We can add a few more classes:

* ru \* \<uu, rr\>
```{r, echo = FALSE}
r*u * SQ2
```

* (ru)^2^ \* \<uu, rr\>
```{r, echo = FALSE}
(r*u)^2 * SQ2
```

We can see that ru\*SQ2 generates a group of order 3 in R/SQ2. To show that this group is normal in R/SQ2 we need just check with the conjugation by u and r since they generate R, so their classes also generate R/SQ2:

```{r normality-ruSQ2}
all(
  (r*u)^r == (r*u)^2*uu,
  (r*u)^u == (r*u)^2*cc
)
```

So R/SQ2 can be quotiented by \<ru\*SQ2\>. It's classes are:

* \<ru\*SQ2\>
  ```{r, echo = FALSE}
  cat('{\r\n')
  SQ2
  r*u*SQ2
  (r*u)^2*SQ2
  cat('}')
  ```

* rSQ2\*\<ru\*SQ2\>
  ```{r, echo = FALSE}
  cat('{\r\n')
  r*SQ2
  u*SQ2 # r*r*u*SQ2 == u*SQ2
  c*SQ2 # r*(r*u)^2*SQ2 == c*SQ2
  cat('}')
  ```

  We verify that r\*r\*u is in u\*SQ2, r\*(r\*u)^2 in c\*SQ2

  ```{r}
  all(
    r*r*u == u*cc,
    r*(r*u)^2 == c*cc
    )
  ```

Since
1. u\*SQ2 in r \* SQ2 \* \<ru\*SQ2\>
2. u\*SQ2 in u \* SQ2 \* \<ru\*SQ2\>
Then r \* SQ2 \* \<ru\*SQ2\> ==  u \* SQ2 \* \<ru\*SQ2\>
Similarly r \* SQ2 \* \<ru\*SQ2\> ==  c \* SQ2 \* \<ru\*SQ2\>


So (R/SQ2)/\<ru\*SQ2\> is generated by r*\<ru\*SQ2\>.
Furthermore we have
1. r*ru\*SQ2 \in \<ru\*SQ2\>
2. r*ru\*SQ2 == u\*SQ2
2. u\*SQ2 \* u\*SQ2 == u^2\*SQ2 == SQ2
3. SQ2 \in \<ru\*SQ2\>
Then: (r\*\<ru\*SQ2\>) ^ 2 == \<ru\*SQ2\>

From this we can deduce that 
* (R/SQ2)/\<ru\*SQ2\> is isomorphic to Z/2Z.
* The elements of R/SQ2 are: SQ2, r\*SQ2, u\*SQ2, c\*SQ2, ru\*SQ2, (ru)^2\*SQ2
* R has 6*4 elements, the full list being 

```{r echo = FALSE}
R <- c(SQ2, r*SQ2, u*SQ2, c*SQ2, r*u*SQ2, ((r*u)^2)*SQ2)
R
```

We can see that R has:

```{r}
perm_orders <- permorder(c(SQ2, r*SQ2, u*SQ2, c*SQ2, r*u*SQ2, ((r*u)^2)*SQ2))
sum(perm_orders == 2)
sum(perm_orders == 4)
sum(perm_orders == 3)
cat('9 elements of order 2: \r\n')
R[c(2, 3, 4, 7, 8, 10, 12, 14, 15)]
cat('8 elements of order 3: \r\n')
R[17:24]
cat('6 elements of order 4: \r\n')
R[c(5, 6, 9, 11, 13, 16)]

```

Elements of order 2 details:
3 are square of elements of order 4:

```{r}
R[c(2, 3, 4)]
```

6 are not square of elements of order 4:

```{r}
R[c(7, 8, 10, 12, 14, 15)]
```

## Looking for more normal subgroups

We know that <ru*SQ2> is normal in R/SQ2
We have <ru*SQ2> =
```{r, echo = FALSE}
cat('{\r\n')
SQ2
r*u*SQ2
(r*u)^2*SQ2
cat('}')
```

Or if we put all the elements together:

```{r}
C3 <- c(SQ2,
  r*u*SQ2,
  (r*u)^2*SQ2)
C3
```

Let C3 = $ SQ2 \cup ruSQ2 \cup (ru)^2SQ2 $ = $ \pi_{SQ2}^{-1}\{<ruSQ2>\} $
Let g be an element of R and h be an element of C3.

We want to see if inv(g)hg is \in C3
[inv(g)hg] = [invg][h][g]
[h] \in <ruSQ2> and <ruSQ2> normal in R/SQ2 so
[inv(g)hg] \in <ruSQ2>
Implies inv(g)hg in C3

So C3 is normal in R.

## Structure of R

We know that R has 24 elements and that it can be quotiented by SQ2 (isomorph to Z/2Z ^2). We know that the quotient is isomorph to S3.


$$0 \rightarrow SQ2 \rightarrow R \rightarrow S3 \rightarrow 0$$

Now we would like to know if R is a semi-direct product of SQ2 and S3.
We need to see if we can embed S3 in R such that

$$ 0 \rightarrow S3 \rightarrow R \rightarrow R/SQ2 = 0 \rightarrow R/SQ2$$

S3 is generated by an element of order 3 p and an element of order 2 a such that the action of a on p gives p2.

Let's try to find an element of order 3 in R that doesnt belong in SQ2. It turns out that there are exactly 8 elements of order 3 and that none belongs to SQ2. The list of all the elements of order 3 is:
[ru], [ru]^2

```{r all-order3}
r*u*SQ2
r*u*r*u*SQ2
```

Let's take for example r\*u. Now we need to find an element of order 2 such that (r\*u)^a = (r\*u)^2. Also a cannot belong to SQ2.

We have [inv a][ru][a] = [ru2]
We can see that [r][ru][r] = [ru2]
By going through the elements of [r] we can see that:
r\*cc is of order 2 and that it acts as we want on r\*u
```{r}
(r*u)^(r*cc) == (r*u)^2

```

The elements of this group are:
```{r, echo = FALSE}
G <- c(r/r, r*cc, (r*cc)^(r*u), r*cc^((r*u)^2), r*u, r*u*r*u)
G
```

The groups G^uu, G^rr and G^cc are also isomorphic to S3 and can also be used to form the semi-direct product.

```{r}
cat('G^uu\r\n')
G^uu
cat('G^rr\r\n')
G^rr
cat('G^cc\r\n')
G^cc
```


### Other quotient of R

We also have 

$$ 0 \rightarrow <ruSQ2> \rightarrow R/SQ2 \rightarrow Z/2Z \rightarrow 0 $$

And since C3 is also normal in R we have:

We also have 

$$ 0 \rightarrow C3 \rightarrow R \rightarrow Z/2Z \rightarrow 0 $$


### Decomposition of S3

We have

$$ 0 \rightarrow Z/3Z \rightarrow S3 \rightarrow Z/2Z \rightarrow 0$$

