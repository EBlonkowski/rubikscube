---
title: "Translation Group of a Binary Function"
author: "Manu"
date: "4 June 2018"
output:
  html_document:
    css: ../custom.css
    number_sections: true
    toc: true
---

```{r setup, include=FALSE}
library(DiagrammeR)
knitr::opts_chunk$set(echo = TRUE)
```


## Observation Group

Let $\mathcal{B} = \{0, 1 \}$ and let $F = \{f: \mathbb{R} \rightarrow \mathcal{B}\}$.

The **observation group** is the group of operations that leave a beat unchanged to the observer. We model this group on a real human listener. In our case there is only one operation, and it is time shift of the beat by any increment. Any other operation, such as changing the timing, inverting the recording can be heard by a human listener. Similarly, inverting the instruments (here the 0 and the 1) is also noticeable to our ears, so it is not in the observation group.

The observation group is $\mathbb{R}$ and it acts on F via the following action 
$$\bullet: F \times \mathbb{R} \rightarrow F \\ r \bullet t (x) \mapsto r(x + t) $$

To the observer, recordings that differ only by a time shift are identical and cannot be distinguished. So the observer is only interested in classes of equivalence of recordings that are shift-equivalent. Such equivalence classes are called **beats**, they are precisely the action of the observation group on F.

For any beat B, we can associate a unique subgroup S of $\mathbb{R}$, such that $\forall r \in B, Stab(r) = S$. We can also associate $Q = \mathbb{R}/S$ to the beat B.

The problem with this approach is that both S and Q are cyclic. So this approach is only good enough to assign cyclic symmetries to beats. Those are very simple and boring symmetries and I want to find a way to associate more complex groups to beats. The very nice things about these group is that they have a very natural definition. In some sense these groups capture the notion that a beat repeating 2 times in 4 is the same as a beat repeating 4 times in 8 or 6 times in 12. It only captures basic repetition information: how much time the beat is repeated and so the group is very small and simple.

We are only interested in recordings r such that there exists a smallest $a > 0$, such that $\forall x \in \mathbb{R}, r(a+x) = r(x)$.

## Playing Group

The **playing group** is the group of operations that one can make on the recordings. There are many operations that one can do, such as shifting the recording, inverting the recording, inverting 0 and 1 (interchanging the instruments), changing the speed of the recording. There are many different playing groups according to what operations we allow.

Here we consider the playing group as all the shifting of the recording, inverting of the recording and inverting the instruments. We do not consider yet change of the recording speed. We note $\forall t \in \mathbb{R}, D_t: F \rightarrow F$, the shift operations. We write $W: F \rightarrow F \\ r \mapsto 1-r$ for the swap operation that swap the instruments. Finally, we write 
$I: F \rightarrow F \\ r(x) \mapsto r(-x)$, for the inversion operation that inverts the recording around the origin.

**Inversion around c** where $c \in \mathbb{R}$. We check that $D_c \circ I \circ D_{-c}$ is the inversion around c. 

>Indeed $[D_c \circ I \circ D_{-c}] (r) (x) = r(-x+2c)$ So that $[D_c \circ I \circ D_{-c}] (r) (c) = r(c)$, so the center of inversion is preserved, and $[D_c \circ I \circ D_{-c}] (r) (c+a) = r(-(c+a)+2c) = r(c - a)$, so that we can see that points are inversed around c.

**Definition of the Playing Group P** is generated by $<D_t, W, I>$. We have $W \circ D_t = D_t \circ W$ and $W \circ I = I \circ W$ so that $<D_t, I> \oplus <W>$. We also have $[I \circ D_t \circ I] (r) (x) = r(x-t) = D_{-t}$. Finally the playing group is $<D_t, I \mid ID_tI = D_{-t}> \oplus <W> = \mathcal{P}$.

For any beat B, we can associate $Stab(B) \in \mathcal{P}$, the subgroup of P that maps B to itself. 

**Definition** For any recording r, we write $\mathcal{P}(r)$ the subgroup of P that maps r to itself. In other words $\mathcal{P}(r)$ is the stabilizer of r in $\mathcal{P}$

### Normal Subgroups of Playing Group

**Normal Decomposition**

$$0 \lhd D_{\mathbb{R}} \lhd D_{\mathbb{R}} \rtimes <I> \lhd <D_{\mathbb{R}}, I> \oplus <W>$$
The quotients are: $<D_{\mathbb{R}}>$, $<I>$, $<W>$

We can also write it as:
$$0 \lhd \mathbb{R} \lhd \mathbb{R} \rtimes C(2) \lhd [\mathbb{R} \rtimes C(2)] \times C(2)$$

With quotients: $\mathbb{R}$, $C(2)$, $C(2)$.

**Property** $P/D_{\mathbb{R}}$ is isomorph to $C(2) \times C(2)$

> Proof: Since $D_{\mathbb{R}}$, W and I generate P, the classes of W and I in $P/D_{\mathbb{R}}$ generate the full quotient group. For any p in P we note [p] the class of p in the quotient of P by the translations.
We easily verify that W and I are not translations, so that [W] and [I] are not the identity. Furthermore they are both of order 2 and they commute in P so they also commute in the quotient.
We need just show that $[W] \neq [I]$.
Let $\mathbb{1_R}$ be the constant function equal to one.
Then $W(\mathbb{1_R}) = \mathbb{0}$ the constant fonction equal to 0.
And $I(\mathbb{1_R}) = \mathbb{1_R}$ the constant fonction equal to 1.
So there exists no $t \in \mathbb{R}$ such that $D_t \circ W(\mathbb{1_R}) = I(\mathbb{1_R})$ and so there exists no $D_t \in D_\mathbb{R}$ such that $D_t \circ W = I$, so that $[W] \neq [I]$. 
Finally $<[W], [I] \  | \ [W]^2 =e, [I]^2 = e, [W][I] = [I][W]>$ is a presentation of $P/D_{\mathbb{R}}$ that is also a presentation of C(2)xC(2), so we can deduce the isomorphism.

**Normal Subgroups of P Containing the Translations**: $D_{\mathbb{R}}$, $WD_{\mathbb{R}}$, $ID_{\mathbb{R}}$, $WID_{\mathbb{R}}$, P

Which gives rise to the following lattice:
```{r normal-lattice, echo = FALSE}
grViz('
digraph boxes_and_circles {

  graph [overlap = true, fontsize = 10, rankdir = "BT"]

  node [shape = circle,
        fontname = Helvetica,
        fillcolor = cyan,
        style = filled]
  D; 
  
  node [width = 1.5]
  WD; ID; WID ; P [width = 2, fontsize = 22] 

  D->WD->P
  D->ID->P
  D->WID->P

}
')
```

**Definition** Let r be a recording. We write $\mathcal{GT}(r)$ the group $D_{\mathbb{R}} \cap \mathcal{P}(r)$. We call it the **lattice subgroup** of r.

**Property** The lattice subgroup of r is normal in $\mathcal{P}(r)$

> Proof: Let $g \in \mathcal{P}(r), D_t \in \mathcal{GT}(r)$. We have $g^{-1}D_tg \in D_{\mathbb{R}}$ and $g^{-1}D_tg \in \mathcal{P}(r)$ so that $g^{-1}D_tg \in \mathcal{GT}(r)$

### Point Group

The **point group** at $c \in \mathbb{R}$ of a recording r is $\{p \in <D_c \circ I \circ D_{-c}> \mid p \bullet r = r\}$. We call it $\mathcal{GL}_c(r)$

W can never be in the point group, so the point group at c is always a subgroup of $<D_c \circ I \circ D_{-c}>$ which has only 2 elements.

The goal of this part is to define the structure of the point groups of a recording r.
The further goal is to associate to any beat B a point group.

Let's assume that the point groups at c and d, two distinct points on the real line are both non trivial.

To understand the reasoning let's assume that the pattern between c and d is 12345, we write is c12345d. We can see that from this pattern and the information that the point groups at c and d are not trivial we can reconstruct the whole recording.

c12345d --Ic-> 54321c12345d -Id-> 54321c12345d54321_12345 -Ic-> 54321_12345_54321c12345d54321_12345 -Id-> 
54321_12345_54321c12345d54321_12345_54321_12345

We observe the size of these:

1 --> 2 --> 4 --> 6 --> 8 --> ... 

Apart from the first step we can see that each step grows the sequence by 2 measures.

If we write 12345 as XY and 54321 as YX we can rewrite the sequence as:

cXYd --Ic-> YXcXYd -Id-> YXcXYdYX_XY -Ic-> YX_XY_YXcXYdYX_XY -Id-> 
YX_XY_YXcXYdYX_XY_YX_XY

It looks like this beat has a translation invariant pattern XYYX, that repeats every $2|c-d|$. Which would mean that a, the minimum repeating distance must divide $2|c-d|$. Finally $\exists k \in \mathbb{N}, |c-d| = k{a \over 2}$, in particular, $|c-d| \geq {a \over 2}$.

  **Property** Let's assume that a recording r has a non-trivial point group at c. Then the point group at $c + {a \over 2}\mathbb{Z}$ is also not trivial.
  
  > We want to show that $\forall x \in \mathbb{R}, n \in \mathbb{Z}, r(c+a/2 + x) = r(c + a/2 -x)$
  First let's assume $\exists k \in \mathbb{Z}, n = 2k$
  Then we have, from the symmetry at c and the translation invariance by a, 
  $$r(c+na/2 + x) = r(c + ka +x ) = r(c+x) = r(c-x) = r(c +2ka -x) = r(c+na/2 - x)$$
  Now let's assume $\exists k \in \mathbb{Z}, n = 2k + 1$
  $$r(c+na/2 + x) = r(c + (2k+1)a/2 +x ) = r(c+ ka + a/2 + x) = r(c + a/2 + x) \\= r(c-x -a/2) = r(c +a/2 -x) = r(c+ 2ka/2 + a/2 - x) = r(c + na/2 -x)$$

  **Property** If a recording r has a non-trivial point group at c. Then $\forall t, D_t \bullet r$ has a non-trivial point group at c-t.
  
  >We want to show that $\forall x \in \mathbb{R}, D_tr(c-t + x) = D_tr(c-t-x)$. Said differently, we want to show that
  Indeed we have $$D_t(c-t + x) = r(t + c-t + x) = r(c+x) = r(c-x) = r(t + c - t - x) = D_tr(c-t-x)$$

  **Conclusion** The point group is a beat invariant. For each beat we can associate a subset of C(2), its point group.
  
  
  **Property** Let r be a recording, we have $\mathcal{P}(r) = \mathcal{GT}(r) \rtimes \mathcal{GL}(r)$
  
  
## Examples

### Constant Recordings

Constant recording $\forall x \in \mathbb{R}, 1_\mathbb{R}(x) = 1$.

The translation group is $D_{\mathbb{R}}$, the point group is $C(2)$.

We have $\mathcal{P}(1_\mathbb{R}) = \mathcal{P}$, its playing group is the full playing group.


### Alternating Recordings

The alternated recording $\forall x \in [0, 1[, al(x) = 1$ and the following functional equation $\forall y \in \mathbb{R}, al(y+1) = 1 - al(y)$

Its translation group is $D_{2 \mathbb{Z}}$ as al(y+2) = 1-al(y+1) = 1-(1-al(y)) = al(y).


## Discrete case

$F_n = \{f: C(n) \rightarrow \mathcal{B}\}, \forall n \in \mathbb{N}$

The observation group of $F_n$ is C(n), and C(n) acts on $F_n$ via the following coaction 
$\bullet: F_n \times C(n) \rightarrow F_n \\ r \bullet g (i) \mapsto r(g + i)$

This is indeed a coaction because $r \bullet g \bullet h (i)= r(h + g + i) = r \bullet (g+h) (i)$

## Classifying the beats of F_n

Let r be a recording of F_n


